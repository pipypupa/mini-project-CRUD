{"mappings":"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","sources":["<anon>","src/js/script.js","src/js/render/render.js","src/js/api/get.js","src/js/api/post.js","src/js/api/edit.js","src/js/api/delete.js","src/js/api/updateLikes.js","src/js/render/renderComments.js","src/js/api/postComments.js"],"sourcesContent":["function $56bc46e2f95825e5$export$2e2bcd8739ae039(posts) {\n    const objectChange = posts.map((object)=>{\n        const newObject = `\n    <li class=\"post-card\" data-id=\"${object.id}\">\n    <img class=\"photo-post\" src=\"${object.imageUrl}\" alt=\"photo\" />\n        <p class=\"user\">${object.userName}</p>\n        <div class=\"stats\">\n            <p id=\"like\" class=\"stats-item\">\n                <button class=\"like-button\"><i class=\"material-icons\">thumb_up</i></button>\n                <span class=\"likes-p\">${object.likes}</span>\n            </p>\n            <p id=\"comment\" class=\"stats-item\">\n                <button class=\"comment-button\"><i class=\"material-icons\">comment</i></button>\n                <span class=\"commments-count\">${object.comments}</span>\n            </p>\n        </div>\n        <button type=\"click\" class=\"edit\">Edit</button>\n        <button type=\"click\" class=\"delete\">Delete</button>\n    </li>\n    `;\n        return newObject;\n    }).join(\"\");\n    return objectChange;\n}\n\n\nasync function $22b8530da6846ac4$export$2e2bcd8739ae039() {\n    try {\n        return await fetch(\"https://6882a21521fa24876a9b6374.mockapi.io/posts\").then((res)=>res.json());\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nasync function $ce473e9f5c47e611$export$2e2bcd8739ae039(post) {\n    try {\n        return await fetch(\"https://6882a21521fa24876a9b6374.mockapi.io/posts\", {\n            method: \"POST\",\n            body: JSON.stringify(post),\n            headers: {\n                \"Content-Type\": \"application/json; charset=UTF-8\"\n            }\n        }).then((res)=>res.json());\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nasync function $5c069ed34b67705e$export$2e2bcd8739ae039(postData, id) {\n    try {\n        const res = await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`, {\n            method: \"PUT\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(postData)\n        });\n        if (!res.ok) throw new Error(\"Failed to update post\");\n        return await res.json();\n    } catch (error) {\n        console.error(\"Failed to update post:\", error);\n        throw error;\n    }\n}\n\n\nasync function $664319a40c8061e6$export$2e2bcd8739ae039(id) {\n    try {\n        return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`, {\n            method: \"DELETE\"\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nasync function $eae13960f3cf2c04$export$2e2bcd8739ae039(likes, id) {\n    try {\n        return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`, {\n            method: \"PUT\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                likes: likes\n            })\n        }).then((res)=>res.json());\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nfunction $0f779b03f6a4cd79$export$2e2bcd8739ae039(comments) {\n    if (!Array.isArray(comments)) {\n        console.warn(\"renderComments expected an array, but got:\", comments);\n        return \"<li class='comment-card'>No comments yet.</li>\";\n    }\n    return comments.map((item)=>`\n            <li data-comment=\"This is a comment to delete\" class=\"comment-card\">\n                <div class=\"div-comment\"><p class=\"comment-info\">${item}</p></div>\n                <button class=\"delete-comment\">Delete</button>\n            </li>\n        `).join(\"\");\n}\n\n\nasync function $72f7858232ed2652$export$2e2bcd8739ae039(updatedComments, id, amountofComments) {\n    try {\n        return await fetch(`https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`, {\n            method: \"PUT\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                comments: amountofComments,\n                commentList: updatedComments\n            })\n        }).then((res)=>res.json());\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n\nlet $3fba0bda95caa784$var$postsList = [];\nlet $3fba0bda95caa784$var$commentPostId = null;\nlet $3fba0bda95caa784$var$postId = null;\nasync function $3fba0bda95caa784$var$refreshPosts() {\n    const data = await (0, $22b8530da6846ac4$export$2e2bcd8739ae039)();\n    document.querySelector(\".posts\").innerHTML = (0, $56bc46e2f95825e5$export$2e2bcd8739ae039)(data);\n    $3fba0bda95caa784$var$postsList = data;\n}\n$3fba0bda95caa784$var$refreshPosts();\ndocument.querySelector(\".add\").addEventListener(\"click\", ()=>{\n    document.querySelector(\".modal-backdrop\").classList.remove(\"hidden\");\n});\ndocument.querySelector(\".close-modal\").addEventListener(\"click\", ()=>{\n    document.querySelector(\".modal-backdrop\").classList.add(\"hidden\");\n});\ndocument.querySelector(\"#new-post-form\").addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    const imageUrl = e.target.elements.url.value;\n    const userName = e.target.elements.Username.value;\n    const postObject = {\n        userName: userName,\n        imageUrl: imageUrl,\n        likes: 0,\n        comments: 0,\n        commentList: []\n    };\n    await (0, $ce473e9f5c47e611$export$2e2bcd8739ae039)(postObject);\n    await $3fba0bda95caa784$var$refreshPosts();\n    document.querySelector(\".modal-backdrop\").classList.add(\"hidden\");\n    e.target.reset();\n});\ndocument.querySelector(\".close-comment-button\").addEventListener(\"click\", ()=>{\n    document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\n});\ndocument.querySelector(\".close-modalEdit\").addEventListener(\"click\", ()=>{\n    document.querySelector(\".modal-backdropEdit\").classList.add(\"hidden\");\n});\ndocument.querySelector(\".posts\").addEventListener(\"click\", (e)=>{\n    const postCard = e.target.closest(\".post-card\");\n    if (!postCard) return;\n    const id = postCard.dataset.id;\n    if (e.target.closest(\".like-button\")) {\n        const likeButton = e.target.closest(\".like-button\");\n        const likesElement = postCard.querySelector(\".likes-p\");\n        let likes = Number(likesElement.textContent);\n        if (likeButton.classList.contains(\"liked\")) return;\n        likes += 1;\n        likesElement.textContent = likes;\n        likeButton.classList.add(\"liked\");\n        (0, $eae13960f3cf2c04$export$2e2bcd8739ae039)(likes, id);\n    }\n    if (e.target.closest(\".comment-button\")) {\n        $3fba0bda95caa784$var$commentPostId = id;\n        document.querySelector(\".modal-backdropCommments\").classList.remove(\"hidden\");\n        const post = $3fba0bda95caa784$var$postsList.find((post)=>post.id === $3fba0bda95caa784$var$commentPostId);\n        document.querySelector(\".comments\").innerHTML = (0, $0f779b03f6a4cd79$export$2e2bcd8739ae039)(post.commentList);\n    }\n    if (e.target.closest(\".delete\")) (0, $664319a40c8061e6$export$2e2bcd8739ae039)(id).then(()=>$3fba0bda95caa784$var$refreshPosts());\n    if (e.target.closest(\".edit\")) {\n        $3fba0bda95caa784$var$postId = id;\n        document.querySelector(\"#username\").value = postCard.querySelector(\".user\").textContent;\n        document.querySelector(\"#url\").value = postCard.querySelector(\".photo-post\").src;\n        document.querySelector(\".modal-backdropEdit\").classList.remove(\"hidden\");\n    }\n});\ndocument.querySelector(\".edit-button\").addEventListener(\"click\", async ()=>{\n    const updatedPost = {\n        userName: document.querySelector(\"#username\").value,\n        imageUrl: document.querySelector(\"#url\").value\n    };\n    try {\n        await (0, $5c069ed34b67705e$export$2e2bcd8739ae039)(updatedPost, $3fba0bda95caa784$var$postId);\n        await $3fba0bda95caa784$var$refreshPosts();\n        document.querySelector(\".modal-backdropEdit\").classList.add(\"hidden\");\n    } catch (error) {\n        console.error(\"Error updating post:\", error);\n    }\n});\ndocument.querySelector('#search-form input[name=\"query\"]').addEventListener(\"input\", (e)=>{\n    const searchTerm = e.target.value.toLowerCase();\n    document.querySelectorAll(\".post-card\").forEach((card)=>{\n        const userName = card.querySelector(\".user\").textContent.toLowerCase();\n        card.style.display = userName.includes(searchTerm) ? \"block\" : \"none\";\n    });\n});\ndocument.querySelector(\".post-comment-button\").addEventListener(\"click\", async ()=>{\n    const comment = document.querySelector(\"#info\").value.trim();\n    if (!comment) return;\n    const post = $3fba0bda95caa784$var$postsList.find((post)=>post.id === $3fba0bda95caa784$var$commentPostId);\n    const updatedList = [\n        ...post.commentList,\n        comment\n    ];\n    const comments = updatedList.length;\n    await (0, $72f7858232ed2652$export$2e2bcd8739ae039)(updatedList, $3fba0bda95caa784$var$commentPostId, comments);\n    await $3fba0bda95caa784$var$refreshPosts();\n    document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\n    document.querySelector(\"#info\").value = \"\";\n});\ndocument.querySelector(\".comments\").addEventListener(\"click\", (e)=>{\n    if (e.target.closest(\".delete-comment\")) {\n        const commentCard = e.target.closest(\"li.comment-card\");\n        const commentToDelete = commentCard.querySelector(\".comment-info\").textContent.trim();\n        const post = $3fba0bda95caa784$var$postsList.find((post)=>post.id === $3fba0bda95caa784$var$commentPostId);\n        const updatedList = post.commentList.filter((comment)=>comment !== commentToDelete);\n        const comments = updatedList.length;\n        (0, $72f7858232ed2652$export$2e2bcd8739ae039)(updatedList, $3fba0bda95caa784$var$commentPostId, comments).then(()=>$3fba0bda95caa784$var$refreshPosts());\n        document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\n    }\n});\n\n\n//# sourceMappingURL=mini-project-CRUD.4cb3fffc.js.map\n","import render from \"./render/render.js\";\r\nimport getPosts from \"./api/get.js\";\r\nimport addPost from \"./api/post.js\";\r\nimport updatePost from \"./api/edit.js\";\r\nimport deletePost from \"./api/delete.js\";\r\nimport updateLikes from \"./api/updateLikes.js\";\r\nimport renderComments from \"./render/renderComments.js\";\r\nimport postComment from \"./api/postComments.js\";\r\n\r\nlet postsList = [];\r\nlet commentPostId = null;\r\nlet postId = null;\r\n\r\nasync function refreshPosts() {\r\n  const data = await getPosts();\r\n  document.querySelector(\".posts\").innerHTML = render(data);\r\n  postsList = data;\r\n}\r\n\r\nrefreshPosts();\r\n\r\ndocument.querySelector(\".add\").addEventListener(\"click\", () => {\r\n  document.querySelector(\".modal-backdrop\").classList.remove(\"hidden\");\r\n});\r\n\r\ndocument.querySelector(\".close-modal\").addEventListener(\"click\", () => {\r\n  document.querySelector(\".modal-backdrop\").classList.add(\"hidden\");\r\n});\r\n\r\ndocument\r\n  .querySelector(\"#new-post-form\")\r\n  .addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n    const imageUrl = e.target.elements.url.value;\r\n    const userName = e.target.elements.Username.value;\r\n\r\n    const postObject = {\r\n      userName,\r\n      imageUrl,\r\n      likes: 0,\r\n      comments: 0,\r\n      commentList: [],\r\n    };\r\n\r\n    await addPost(postObject);\r\n    await refreshPosts();\r\n\r\n    document.querySelector(\".modal-backdrop\").classList.add(\"hidden\");\r\n    e.target.reset();\r\n  });\r\n\r\ndocument\r\n  .querySelector(\".close-comment-button\")\r\n  .addEventListener(\"click\", () => {\r\n    document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\r\n  });\r\n\r\ndocument.querySelector(\".close-modalEdit\").addEventListener(\"click\", () => {\r\n  document.querySelector(\".modal-backdropEdit\").classList.add(\"hidden\");\r\n});\r\n\r\ndocument.querySelector(\".posts\").addEventListener(\"click\", (e) => {\r\n  const postCard = e.target.closest(\".post-card\");\r\n  if (!postCard) return;\r\n\r\n  const id = postCard.dataset.id;\r\n\r\n  if (e.target.closest(\".like-button\")) {\r\n    const likeButton = e.target.closest(\".like-button\");\r\n    const likesElement = postCard.querySelector(\".likes-p\");\r\n    let likes = Number(likesElement.textContent);\r\n\r\n    if (likeButton.classList.contains(\"liked\")) return;\r\n\r\n    likes += 1;\r\n    likesElement.textContent = likes;\r\n    likeButton.classList.add(\"liked\");\r\n    updateLikes(likes, id);\r\n  }\r\n\r\n  if (e.target.closest(\".comment-button\")) {\r\n    commentPostId = id;\r\n    document\r\n      .querySelector(\".modal-backdropCommments\")\r\n      .classList.remove(\"hidden\");\r\n\r\n    const post = postsList.find((post) => post.id === commentPostId);\r\n    document.querySelector(\".comments\").innerHTML = renderComments(\r\n      post.commentList\r\n    );\r\n  }\r\n\r\n  if (e.target.closest(\".delete\")) {\r\n    deletePost(id).then(() => refreshPosts());\r\n  }\r\n\r\n  if (e.target.closest(\".edit\")) {\r\n    postId = id;\r\n\r\n    document.querySelector(\"#username\").value =\r\n      postCard.querySelector(\".user\").textContent;\r\n    document.querySelector(\"#url\").value =\r\n      postCard.querySelector(\".photo-post\").src;\r\n\r\n    document.querySelector(\".modal-backdropEdit\").classList.remove(\"hidden\");\r\n  }\r\n});\r\n\r\ndocument.querySelector(\".edit-button\").addEventListener(\"click\", async () => {\r\n  const updatedPost = {\r\n    userName: document.querySelector(\"#username\").value,\r\n    imageUrl: document.querySelector(\"#url\").value,\r\n  };\r\n\r\n  try {\r\n    await updatePost(updatedPost, postId);\r\n    await refreshPosts();\r\n    document.querySelector(\".modal-backdropEdit\").classList.add(\"hidden\");\r\n  } catch (error) {\r\n    console.error(\"Error updating post:\", error);\r\n  }\r\n});\r\n\r\ndocument\r\n  .querySelector('#search-form input[name=\"query\"]')\r\n  .addEventListener(\"input\", (e) => {\r\n    const searchTerm = e.target.value.toLowerCase();\r\n\r\n    document.querySelectorAll(\".post-card\").forEach((card) => {\r\n      const userName = card.querySelector(\".user\").textContent.toLowerCase();\r\n      card.style.display = userName.includes(searchTerm) ? \"block\" : \"none\";\r\n    });\r\n  });\r\n\r\ndocument\r\n  .querySelector(\".post-comment-button\")\r\n  .addEventListener(\"click\", async () => {\r\n    const comment = document.querySelector(\"#info\").value.trim();\r\n    if (!comment) return;\r\n\r\n    const post = postsList.find((post) => post.id === commentPostId);\r\n    const updatedList = [...post.commentList, comment];\r\n    const comments = updatedList.length;\r\n\r\n    await postComment(updatedList, commentPostId, comments);\r\n    await refreshPosts();\r\n\r\n    document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\r\n    document.querySelector(\"#info\").value = \"\";\r\n  });\r\n\r\ndocument.querySelector(\".comments\").addEventListener(\"click\", (e) => {\r\n  if (e.target.closest(\".delete-comment\")) {\r\n    const commentCard = e.target.closest(\"li.comment-card\");\r\n    const commentToDelete = commentCard\r\n      .querySelector(\".comment-info\")\r\n      .textContent.trim();\r\n\r\n    const post = postsList.find((post) => post.id === commentPostId);\r\n    const updatedList = post.commentList.filter(\r\n      (comment) => comment !== commentToDelete\r\n    );\r\n    const comments = updatedList.length;\r\n\r\n    postComment(updatedList, commentPostId, comments).then(() =>\r\n      refreshPosts()\r\n    );\r\n    document.querySelector(\".modal-backdropCommments\").classList.add(\"hidden\");\r\n  }\r\n});\r\n","export default function render(posts) {\r\n  const objectChange = posts\r\n    .map((object) => {\r\n      const newObject = `\r\n    <li class=\"post-card\" data-id=\"${object.id}\">\r\n    <img class=\"photo-post\" src=\"${object.imageUrl}\" alt=\"photo\" />\r\n        <p class=\"user\">${object.userName}</p>\r\n        <div class=\"stats\">\r\n            <p id=\"like\" class=\"stats-item\">\r\n                <button class=\"like-button\"><i class=\"material-icons\">thumb_up</i></button>\r\n                <span class=\"likes-p\">${object.likes}</span>\r\n            </p>\r\n            <p id=\"comment\" class=\"stats-item\">\r\n                <button class=\"comment-button\"><i class=\"material-icons\">comment</i></button>\r\n                <span class=\"commments-count\">${object.comments}</span>\r\n            </p>\r\n        </div>\r\n        <button type=\"click\" class=\"edit\">Edit</button>\r\n        <button type=\"click\" class=\"delete\">Delete</button>\r\n    </li>\r\n    `;\r\n      return newObject;\r\n    })\r\n\r\n    .join(\"\");\r\n  return objectChange;\r\n}\r\n","export default async function getPosts() {\r\n  try {\r\n    return await fetch(\r\n      \"https://6882a21521fa24876a9b6374.mockapi.io/posts\"\r\n    ).then((res) => res.json());\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n","export default async function addPost(post) {\r\n  try {\r\n    return await fetch(\"https://6882a21521fa24876a9b6374.mockapi.io/posts\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(post),\r\n        headers: {\r\n        \"Content-Type\": \"application/json; charset=UTF-8\",\r\n        }\r\n    }).then((res) => res.json())\r\n  } catch (error) {\r\n    console.log(error)\r\n}\r\n}","export default async function updatePost(postData, id) {\r\n  try {\r\n    const res = await fetch(\r\n      `https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(postData),\r\n      }\r\n    );\r\n\r\n    if (!res.ok) throw new Error(\"Failed to update post\");\r\n\r\n    return await res.json();\r\n  } catch (error) {\r\n    console.error(\"Failed to update post:\", error);\r\n    throw error;\r\n  }\r\n}\r\n","export default async function deletePost(id) {\r\n  try {\r\n    return await fetch(\r\n      `https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`,\r\n      {\r\n        method: \"DELETE\",\r\n      }\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n","export default async function updateLikes(likes, id) {\r\n  try {\r\n    return await fetch(\r\n      `https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ likes: likes }),\r\n      }\r\n    ).then((res) => res.json());\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n","export default function renderComments(comments) {\r\n  if (!Array.isArray(comments)) {\r\n    console.warn(\"renderComments expected an array, but got:\", comments);\r\n    return \"<li class='comment-card'>No comments yet.</li>\";\r\n  }\r\n  return comments\r\n    .map(\r\n      (item) => `\r\n            <li data-comment=\"This is a comment to delete\" class=\"comment-card\">\r\n                <div class=\"div-comment\"><p class=\"comment-info\">${item}</p></div>\r\n                <button class=\"delete-comment\">Delete</button>\r\n            </li>\r\n        `\r\n    )\r\n    .join(\"\");\r\n}\r\n","export default async function postComment(\r\n  updatedComments,\r\n  id,\r\n  amountofComments\r\n) {\r\n  try {\r\n    return await fetch(\r\n      `https://6882a21521fa24876a9b6374.mockapi.io/posts/${id}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          comments: amountofComments,\r\n          commentList: updatedComments,\r\n        }),\r\n      }\r\n    ).then((res) => res.json());\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n"],"names":["$22b8530da6846ac4$export$2e2bcd8739ae039","fetch","then","res","json","error","console","log","$ce473e9f5c47e611$export$2e2bcd8739ae039","post","method","body","JSON","stringify","headers","$5c069ed34b67705e$export$2e2bcd8739ae039","postData","id","ok","Error","$664319a40c8061e6$export$2e2bcd8739ae039","$eae13960f3cf2c04$export$2e2bcd8739ae039","likes","$72f7858232ed2652$export$2e2bcd8739ae039","updatedComments","amountofComments","comments","commentList","$3fba0bda95caa784$var$postsList","$3fba0bda95caa784$var$commentPostId","$3fba0bda95caa784$var$postId","$3fba0bda95caa784$var$refreshPosts","data","document","querySelector","innerHTML","posts","map","object","imageUrl","userName","join","addEventListener","classList","remove","add","e","preventDefault","target","elements","url","value","Username","reset","postCard","closest","dataset","likeButton","likesElement","Number","textContent","contains","find","Array","isArray","item","warn","src","updatedPost","searchTerm","toLowerCase","querySelectorAll","forEach","card","style","display","includes","comment","trim","updatedList","length","commentToDelete","commentCard","filter"],"version":3,"file":"mini-project-CRUD.4cb3fffc.js.map"}